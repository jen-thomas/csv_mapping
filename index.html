<html>
<head>
<link rel="stylesheet" href="https://npmcdn.com/leaflet@0.7.5/dist/leaflet.css" />
<script src="https://npmcdn.com/leaflet@0.7.5/dist/leaflet.js"></script>
<link rel="stylesheet" href="css.css" />

<link rel="stylesheet" href="leaflet-text-icon.css" />
<script src="leaflet-text-icon.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.1.2/papaparse.min.js"></script>

<title>MAPPING MOVEMENTS</title>
</head>
<body>
<div id="mapid"></div>
<script>
var mymap = L.map('mapid').setView([51.5, -0.09], 13);
L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',
    maxZoom: 18
}).addTo(mymap);
var marker = L.marker([51.5, -0.09]).addTo(mymap);
var circle = L.circle([51.508, -0.11], 500, {
    color: 'red',
    fillColor: '#f03',
    fillOpacity: 0.5
}).addTo(mymap);
var polygon = L.polygon([
    [51.509, -0.08],
    [51.503, -0.06],
    [51.51, -0.047],
    [51.48, -0.03]
]).addTo(mymap);
marker.bindPopup("<b>Hello Carles!</b><br>I am a Jen.").openPopup();
circle.bindPopup("I am a circle.");
polygon.bindPopup("I am a polygon.");
Papa.parse("test.csv", {
	download: true,
        skipEmptyLines: true,
        header: true,
	complete: function(results) {console.log("Parsing complete:", results);
        for (var index = 0; index < results.data.length; ++index) {
        var lat = results.data[index].lat;
        var lon = results.data[index].lon;
        var id = results.data[index].id;
        var icon = new L.TextIcon({text:123, color: 'red'});
        var marker = L.marker([lat, lon], {icon: icon}).addTo(mymap);
        marker.bindPopup(id).openPopup();
}


}
})
</script>
</body>
</html>
